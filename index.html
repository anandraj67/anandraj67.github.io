<!DOCTYPE html>
<html>
<head>
  <title>Kite Callback</title>
</head>
<body>
  <h2>Processing login...</h2>
  <script>
    const params = new URLSearchParams(window.location.search);
    const requestToken = params.get("request_token");

    console.log("ğŸŒ Page loaded");
    console.log("ğŸ” URL =", window.location.href);
    console.log("ğŸ§ª request_token =", requestToken);

    if (requestToken) {
      console.log("ğŸ“¤ Posting token with window.postMessage");
      window.postMessage({
        type: "kite_token",
        request_token: requestToken
      }, "*");
    } else {
      console.log("âŒ No request_token in URL");
      document.body.innerText = "âŒ request_token missing in URL.";
    }
  </script>
</body>
</html>
